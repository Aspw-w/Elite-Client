package com.instrumentalist.elite.hacks.features.exploit.disablermode.features;

import com.instrumentalist.elite.events.features.*;
import com.instrumentalist.elite.hacks.ModuleManager;
import com.instrumentalist.elite.hacks.features.exploit.disablermode.DisablerEvent;
import com.instrumentalist.elite.hacks.features.movement.Fly;
import com.instrumentalist.elite.utils.ChatUtil;
import com.instrumentalist.elite.utils.IMinecraft;
import com.instrumentalist.elite.utils.packet.PacketUtil;
import com.instrumentalist.elite.utils.pathfinder.MainPathFinder;
import com.instrumentalist.elite.utils.rotation.RotationUtil;
import net.minecraft.network.packet.Packet;
import net.minecraft.network.packet.c2s.common.CommonPongC2SPacket;
import net.minecraft.network.packet.c2s.play.ClientCommandC2SPacket;
import net.minecraft.network.packet.c2s.play.PlayerActionC2SPacket;
import net.minecraft.network.packet.c2s.play.PlayerMoveC2SPacket;
import net.minecraft.network.packet.c2s.play.TeleportConfirmC2SPacket;
import net.minecraft.network.packet.s2c.common.CommonPingS2CPacket;
import net.minecraft.network.packet.s2c.play.PlayerPositionLookS2CPacket;
import net.minecraft.util.math.Vec3d;

import java.util.ArrayList;

public class MinibloxFullDisabler implements DisablerEvent {

    @Override
    public String getName() {
        return "Miniblox Full";
    }

    public static int tpTick = 0;

    @Override
    public void onUpdate(UpdateEvent event) {
    }

    @Override
    public void onMotion(MotionEvent event) {
    }

    @Override
    public void onTick(TickEvent event) {
    }

    @Override
    public void onSendPacket(SendPacketEvent event) {
    }

    @Override
    public void onReceivedPacket(ReceivedPacketEvent event) {
        if (IMinecraft.mc.player == null) return;

        Packet<?> packet = event.packet;

        if (packet instanceof PlayerPositionLookS2CPacket) {
            event.cancel();
            tpTick++;
            ChatUtil.printChat("flag " + tpTick);

            if (tpTick >= 20) {
                PacketUtil.sendPacketAsSilent(new PlayerMoveC2SPacket.Full(IMinecraft.mc.player.getX(), IMinecraft.mc.player.getY(), IMinecraft.mc.player.getZ(), IMinecraft.mc.player.getYaw(), IMinecraft.mc.player.getPitch(), true, false));
                PacketUtil.sendPacketAsSilent(new TeleportConfirmC2SPacket(0));
                ChatUtil.printChat("awa");
                tpTick = 0;
            }
        }
    }

    @Override
    public void onWorld(WorldEvent event) {
    }
}